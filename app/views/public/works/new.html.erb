<%= render 'layouts/frame', type: :standard do %>
<%= render 'public/shared/error_messages', resource: @work %>
  <h2>作品投稿</h2>
  <% if @club != nil %>
    <p><%= @club.name %>の作品を投稿します。</p>
  <% end %>
  <%= form_with model: Work.new do |f| %>
    <div>
      <%= f.label :thumbnail, 'ベース画像' %><br>
      <%= f.file_field :thumbnail, accept: "image/*" %>
    </div>
    <% for nth_form in 0..9 %>
      <div id="form-number-<%= nth_form %>" class="<% if nth_form == 0 %>active-form <% else %> non-active-form <% end %>" style="border: 1px solid;">
        <%= f.fields_for :items, Work.new.items.build do |item| %>
          <div>
            <%= item.label :genre, 'アイテムグループ名' %><br>
            <%= item.text_field :genre %>
          </div>
          <div>
            <%= item.label :images, 'アイテム画像' %><br>
            <%= item.file_field :images, multiple: true, accept: "image/*" %>
          </div>
        <% end %>
      </div>
    <% end %>
    
    <span id="add-form" class="btn">
      アイテム欄を追加する（プラスボタンでいい）
    </span>
    <span id="remove-form" class="btn">
      アイテム欄を削除する（マイナスボタンでいい）
    </span>
    <div>
      <%= f.label :title, '作品名' %><br>
      <%= f.text_field :title %>
    </div>
    <div>
      <%= f.label :caption, 'キャプション' %><br>
      <%= f.text_area :caption, class:"form-control", size: "1x5" %>
    </div>
    <div>
      <% if @club != nil %>
        <%= f.hidden_field :club_id, :value => @club.id %>
      <% end %>
      <%= f.submit '作品を投稿', class:"btn btn-success mt-3" %>
    </div>
    <p>アイテムの1つ目の画像に全面透過画像を追加することで、何もない状態が表示されます。</p>
  <% end %>

<% end %>